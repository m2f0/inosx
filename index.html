<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!-- Atualiza√ß√£o da meta viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>INOSX</title>
  <style>
    :root {
      --bg-color: #ffffff;
      --text-color: #000000;
      --font-size-large: clamp(1.5rem, 5vw, 3rem);
      --font-size-medium: clamp(1.2rem, 4vw, 2rem);
      --font-size-small: clamp(1rem, 3vw, 1.5rem);
    }

    /* Reset b√°sico */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html {
      font-size: 16px;
      scroll-behavior: smooth;
      overflow-x: hidden;
      scroll-padding-top: 0;
    }

    html, body {
      width: 100%;
      height: 500vh;
      overflow-x: hidden;
      background-color: var(--bg-color);
      color: var(--text-color);
      font-family: sans-serif;
      -webkit-text-size-adjust: 100%;
    }

    .start-container {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      display: flex;
      align-items: center;
      gap: clamp(10px, 2vw, 20px);
      z-index: 2000; /* Aumentado para garantir que fique acima de tudo */
      opacity: 1;
      transition: opacity 0.5s ease;
      padding: 0 clamp(10px, 3vw, 20px);
      width: min(90%, 600px);
      justify-content: center;
      cursor: pointer; /* Adicionado para melhor feedback visual */
      pointer-events: auto; /* Garantir que os eventos de clique funcionem */
    }

    .start-text {
      color: var(--text-color);
      font-size: var(--font-size-medium);
      white-space: nowrap;
    }

    .text-container {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      text-align: center;
      width: min(90%, 800px);
      opacity: 0;
      transition: opacity 0.5s ease;
      padding: 0 clamp(10px, 3vw, 20px);
    }

    .text-container span {
      display: block;
      font-size: var(--font-size-large);
      margin: clamp(5px, 1vh, 10px) 0;
      white-space: pre-wrap;
    }

    #text3-anim {
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: var(--font-size-large);
      opacity: 0;
      white-space: nowrap;
      text-align: center;
      z-index: 98;
    }

    #text4 {
      font-size: 8rem;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 8rem;
      opacity: 0; /* Importante: come√ßar invis√≠vel */
      white-space: nowrap;
      text-align: center;
      z-index: 98;
    }

    .scroll-indicator {
      position: fixed;
      bottom: clamp(10px, 3vh, 20px);
      right: clamp(10px, 3vw, 20px);
      cursor: pointer;
      opacity: 0.7;
      transition: opacity 0.2s ease;
      z-index: 100;
      transform: scale(clamp(0.7, 0.7 + 0.3vw, 1));
    }

    @keyframes slideUp {
      from {
        transform: translateY(100%);
        opacity: 0;
      }
      to {
        transform: translateY(0);
        opacity: 1;
      }
    }

    .chat-instructions {
      color: white;
      text-align: center;
      margin-bottom: 20px;
      padding: 10px;
      border-radius: 8px;
      background-color: rgba(0, 0, 0, 0.5);
      width: min(90%, 600px);
    }

    .chat-input-container {
      width: min(90%, 600px);
      background-color: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 10px;
    }

    .chat-input-wrapper {
      display: flex;
      gap: 10px;
    }

    .chat-input {
      flex: 1;
      padding: 10px;
      border: none;
      border-radius: 4px;
      background-color: rgba(255, 255, 255, 0.9);
      color: black;
    }

    .send-button {
      padding: 10px;
      border: none;
      border-radius: 4px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: background-color 0.3s;
    }

    .send-button:hover {
      background-color: #0056b3;
    }

    /* Modo escuro */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #000000;
        --text-color: #ffffff;
      }
    }

    /* Ajustes para orienta√ß√£o paisagem em dispositivos m√≥veis */
    @media (max-height: 500px) and (orientation: landscape) {
      .text-container {
        top: 60%;
      }

      .chat-instructions {
        top: 20%;
      }

      .chat-input-container {
        padding: clamp(5px, 2vh, 10px);
      }
    }

    /* Classe para esconder elementos */
    .hidden {
      opacity: 0 !important;
      pointer-events: none !important;
      transform: translateY(100%);
    }

    /* Classe para quando os elementos devem estar vis√≠veis */
    .visible {
      opacity: 1 !important;
      pointer-events: auto !important;
      transform: translateY(0);
    }
  </style>
</head>
<body>
  <!-- Container com os tr√™s textos em linha -->
  <div class="start-container" id="startContainer">
    <span class="start-text">Welcome to the future. Start the experience</span>
    <div class="start-arrow">
      <svg width="40" height="40" viewBox="0 0 24 24">
        <path fill="currentColor" d="M8.59,16.58L13.17,12L8.59,7.41L10,6L16,12L10,18L8.59,16.58Z" />
      </svg>
    </div>
  </div>
  <div class="text-container">
    <span id="text1">There are no more websites...</span>
    <span id="text2">... there's only AI.</span>
    <span id="text3">And, WE CREATE AI.</span>
  </div>
  <!-- Elemento duplicado para animar "And, WE CREATE AI." -->
  <div id="text3-anim">WE CREATE AI.</div>
  <!-- Elemento para exibir "INOSX" -->
  <div id="text4">INOSX</div>
  <!-- √çcone de seta para baixo -->
  <div class="scroll-indicator">
    <svg width="40" height="40" viewBox="0 0 24 24">
      <path fill="currentColor" d="M12,16.5L5,9.5L6.41,8.09L12,13.67L17.59,8.09L19,9.5L12,16.5Z" />
    </svg>
  </div>

  <!-- Adicionar a nova div para o Flowise com configura√ß√£o completa -->
  <div id="flowise-container" style="display: none;">
    <script type="module">
      import Chatbot from "https://cdn.jsdelivr.net/npm/flowise-embed/dist/web.js"
      Chatbot.init({
          chatflowid: "46c6af42-09e1-473e-bf7a-ec14219cc7c5",
          apiHost: "https://flow.inosx.ai",
          chatflowConfig: {
              /* Chatflow Config */
          },
          observersConfig: {
              /* Observers Config */
          },
          theme: {
              button: {
                  backgroundColor: '#3B81F6',
                  right: 20,
                  bottom: 20,
                  size: 48,
                  dragAndDrop: true,
                  iconColor: 'white',
                  customIconSrc: './INOSX.png',  // Caminho relativo
                  autoWindowOpen: {
                      autoOpen: true,
                      openDelay: 2,
                      autoOpenOnMobile: false
                  }
              },
              tooltip: {
                  showTooltip: true,
                  tooltipMessage: 'Hi There üëã!',
                  tooltipBackgroundColor: 'black',
                  tooltipTextColor: 'white',
                  tooltipFontSize: 16
              },
              disclaimer: {
                  title: 'Disclaimer',
                  message: "By using this chatbot, you agree to the <a target=\"_blank\" href=\"./terms.html\">Terms & Condition</a>",
                  textColor: 'black',
                  buttonColor: '#3b82f6',
                  buttonText: 'Start Chatting',
                  buttonTextColor: 'white',
                  blurredBackgroundColor: 'rgba(0, 0, 0, 0.4)',
                  backgroundColor: 'white'
              },
              customCSS: `
                .flowise-container {
                  width: 90% !important;
                  max-width: 800px !important;
                }
                @media (max-width: 768px) {
                  .flowise-container {
                    width: 95% !important;
                  }
                }
              `,
              chatWindow: {
                  showTitle: true,
                  showAgentMessages: true,
                  title: 'INOSX Bot',
                  titleAvatarSrc: './INOSX.png',  // Caminho relativo
                  welcomeMessage: 'Hello! How can I help you today?',
                  errorMessage: 'This is a custom error message',
                  backgroundColor: '#ffffff',
                  backgroundImage: 'enter image path or link',
                  height: 700,
                  width: '90%', // Changed from fixed 400px to responsive 90%
                  fontSize: 16,
                  starterPrompts: [
                      "What is a bot?",
                      "Who are you?"
                  ],
                  starterPromptFontSize: 15,
                  clearChatOnReload: false,
                  sourceDocsTitle: 'Sources:',
                  renderHTML: true,
                  botMessage: {
                      backgroundColor: '#f7f8ff',
                      textColor: '#303235',
                      showAvatar: true,
                      avatarSrc: './INOSX.png'  // Caminho relativo
                  },
                  userMessage: {
                      backgroundColor: '#3B81F6',
                      textColor: '#ffffff',
                      showAvatar: true,
                      avatarSrc: 'https://raw.githubusercontent.com/zahidkhawaja/langchain-chat-nextjs/main/public/usericon.png'
                  },
                  textInput: {
                      placeholder: 'Type your question',
                      backgroundColor: '#ffffff',
                      textColor: '#303235',
                      sendButtonColor: '#3B81F6',
                      maxChars: 50,
                      maxCharsWarningMessage: 'You exceeded the characters limit. Please input less than 50 characters.',
                      autoFocus: true,
                      sendMessageSound: true,
                      sendSoundLocation: 'send_message.mp3',
                      receiveMessageSound: true,
                      receiveSoundLocation: 'receive_message.mp3'
                  },
                  feedback: {
                      color: '#303235'
                  },
                  dateTimeToggle: {
                      date: true,
                      time: true
                  },
                  footer: {
                      textColor: '#303235',
                      text: 'Powered by',
                      company: 'INOSX',
                      companyLink: 'https://inosx.com'
                  }
              }
          }
      })
    </script>
  </div>

  <!-- Adicione os elementos de √°udio no HTML -->
  <audio id="audio1" preload="auto">
    <source src="audio/there-are-no-more-websites.mp3" type="audio/mpeg">
  </audio>
  <audio id="audio2" preload="auto">
    <source src="audio/theres-only-ai.mp3" type="audio/mpeg">
  </audio>
  <audio id="audio3" preload="auto">
    <source src="audio/we-create-ai.mp3" type="audio/mpeg">
  </audio>
  <audio id="audio4" preload="auto">
    <source src="audio/inosx.mp3" type="audio/mpeg">
  </audio>

  <script>
    window.onbeforeunload = function () {
      window.scrollTo(0, 0);
    }

    window.addEventListener('load', function() {
      window.scrollTo(0, 0);
    });

    window.addEventListener('popstate', function() {
      window.scrollTo(0, 0);
    });

    (function(){
      let vh = window.innerHeight;
      let fadeRange = 0.2 * vh; // 20% da viewport para fade in/out

      const startContainer = document.getElementById("startContainer");
      const textContainer = document.querySelector(".text-container");
      const text1 = document.getElementById("text1");
      const text2 = document.getElementById("text2");
      const text3 = document.getElementById("text3");
      const text3Anim = document.getElementById("text3-anim");
      const text4 = document.getElementById("text4");
      const scrollIndicator = document.querySelector(".scroll-indicator");
      const chatInput = document.getElementById("chatInput");
      const chatInstructions = document.getElementById("chatInstructions");
      let audioInitialized = false;
      let experienceStarted = false;

      // Refer√™ncias aos elementos de √°udio
      const audio1 = document.getElementById("audio1");
      const audio2 = document.getElementById("audio2");
      const audio3 = document.getElementById("audio3");
      const audio4 = document.getElementById("audio4");
      
      let played1 = false;
      let played2 = false;
      let played3 = false;
      let played4 = false;

      // Fun√ß√£o para iniciar a experi√™ncia
      async function startExperience() {
        try {
          const audioContext = new (window.AudioContext || window.webkitAudioContext)();
          await audioContext.resume();
          
          // Carrega os √°udios
          audio1.load();
          audio2.load();
          audio3.load();
          audio4.load();
          
          audioInitialized = true;
          experienceStarted = true;

          // Esconde o container inicial
          startContainer.classList.add('hidden');

          // Mostra os elementos da experi√™ncia
          textContainer.style.opacity = '1';
          scrollIndicator.style.opacity = '1';

          // Inicia a atualiza√ß√£o
          update();
        } catch (error) {
          console.log('Erro ao inicializar √°udio:', error);
        }
      }

      // Adiciona evento de clique no bot√£o inicial
      startContainer.addEventListener('click', startExperience);

      // Fun√ß√£o para reproduzir √°udio
      async function playAudioWithFallback(audioElement) {
        if (audioInitialized) {
          try {
            await audioElement.play();
          } catch (error) {
            console.log('Erro na reprodu√ß√£o do √°udio:', error);
          }
        }
      }

      // Fun√ß√£o auxiliar para calcular opacidade
      function fadeOpacity(scrollPos, range) {
        if (scrollPos < fadeRange) {
          return scrollPos / fadeRange;
        } else if (scrollPos > range - fadeRange) {
          return (range - scrollPos) / fadeRange;
        }
        return 1;
      }

      // Fun√ß√£o principal de atualiza√ß√£o
      function update() {
        const scrollY = window.scrollY;
        const windowHeight = window.innerHeight;
        const documentHeight = document.documentElement.scrollHeight;
        const scrollPercentage = (scrollY / (documentHeight - windowHeight)) * 100;

        if (!experienceStarted) return;

        // Esconde o container inicial imediatamente quando come√ßar a rolar
        if (scrollY > 0) {
          startContainer.classList.add('hidden');
        }

        // Reset inicial - removida a linha que resetava text4
        text3Anim.style.opacity = 0;

        // Se√ß√£o 1: [0, vh]
        if (scrollY < vh) {
          text1.style.opacity = 1;
          scrollIndicator.style.opacity = 1;
          if (!played1 && scrollY > vh * 0.3) {
            playAudioWithFallback(audio1);
            played1 = true;
          }
        } else {
          text1.style.opacity = 0;
        }

        // Se√ß√£o 2: [vh, 2vh]
        if (scrollY >= vh && scrollY < 2 * vh) {
          let rel = scrollY - vh;
          text2.style.opacity = fadeOpacity(rel, vh);
          if (!played2 && rel > vh * 0.3) {
            playAudioWithFallback(audio2);
            played2 = true;
          }
        } else {
          text2.style.opacity = 0;
        }

        // Se√ß√£o 3: [2vh, 3vh]
        if (scrollY >= 2 * vh && scrollY < 3 * vh) {
          let rel = scrollY - 2 * vh;
          text3.style.opacity = fadeOpacity(rel, vh);
          if (!played3 && rel > vh * 0.3) {
            playAudioWithFallback(audio3);
            played3 = true;
          }
        } else {
          text3.style.opacity = 0;
        }

        // Se√ß√£o 4: [3vh, 4vh] - Aqui o texto INOSX aparece
        if (scrollY >= 3 * vh && scrollY < 4 * vh) {
          let t = (scrollY - 3 * vh) / vh;
          text3Anim.style.opacity = t;
          text4.style.opacity = t;
          if (!played4 && t > 0.3) {
            playAudioWithFallback(audio4);
            played4 = true;
          }
        }

        // Se√ß√£o 5: [4vh, 5vh] - Texto INOSX permanece vis√≠vel
        if (scrollY >= 4 * vh || scrollPercentage >= 75) { // Mostra quando atingir 4vh OU 75% do scroll
          text4.style.opacity = '1';
          chatInput.style.opacity = '1';
          chatInstructions.style.opacity = '1';
          
          // Garante que os elementos sejam clic√°veis
          chatInput.style.pointerEvents = 'auto';
          chatInstructions.style.pointerEvents = 'auto';
        } else {
          chatInput.style.opacity = '0';
          chatInstructions.style.opacity = '0';
          
          // Desativa eventos quando invis√≠vel
          chatInput.style.pointerEvents = 'none';
          chatInstructions.style.pointerEvents = 'none';
        }

        // Controle da visibilidade do chat
        const flowiseContainer = document.getElementById('flowise-container');
        
        if (scrollPercentage >= 75) { // Mostra quando atingir 75% do scroll
          flowiseContainer.style.display = 'block';
        } else {
          flowiseContainer.style.display = 'none';
        }
      }

      // Event listeners
      window.addEventListener("scroll", update);
      window.addEventListener("resize", () => {
        vh = window.innerHeight;
        fadeRange = 0.2 * vh;
        if (experienceStarted) {
          update();
        }
      });

      // Primeira execu√ß√£o do update
      update();
    })();
  </script>
</body>
</html>
